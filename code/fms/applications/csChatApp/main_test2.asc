load( "components.asc" );
trace("this is the main.asc file");

application.onConnect = function(client, uname) {
	//gFrameworkFC.getClientGlobals(client).username = uname;
	trace(uname + " has connected");
	application.acceptConnection(client);
};
application.onDisconnect = function(client) {
	var userInfo = gFrameworkFC.getClientGlobals(client);
	queue_so.setProperty("t_"+userInfo.username,null);

	trace("Student " + userInfo.username + " has disconnected.");
	for (var i = 0; i < application.clients.length; i++) {
		var c = application.clients[i];
		c.call("disconnect_s",null,userInfo.username);
	}
	
	queue_so.setProperty("s_"+userInfo.username,null);
	trace(userInfo.username+" disconnected!!!!!!!!");
};
