load("components.asc");

application.onAppStart = function() {
	queue_so = SharedObject.get("customerServiceRequest");
};
application.onConnect = function(client, uname) {
	gFrameworkFC.getClientGlobals(client).username = uname;
	trace(uname + " has connected");
	application.acceptConnection(client);
};

application.onDisconnect = function(client) {

	var userInfo = gFrameworkFC.getClientGlobals(client);
	queue_so.setProperty(userInfo.username,null);

	trace("Student " + userInfo.username + " has disconnected.");
	//for (var i = 0; i < application.clients.length; i++) {
	//	var c = application.clients[i];
	//	c.call("disconnect_s",null,userInfo.username);
	//}
	
	//queue_so.setProperty("s_"+userInfo.username,null);
	//trace(userInfo.username+" disconnected!!!!!!!!");
};

//application.onAppStart = function() {
//	trace("ON appStart");
//};



//application.onConnect = function(newClient, newUserName) {

//	trace("onConnect");

//};

//application.onDisconnect = function(client) {
	
//	trace("onDisconnect");

//};

//application.getServerTime_Result = function(returnObj) {

//	trace("getServerTime_Result");

//};

//application.getServerTime_Status = function(returnObj) {
	
//	trace("getServerTime_Status");

//};